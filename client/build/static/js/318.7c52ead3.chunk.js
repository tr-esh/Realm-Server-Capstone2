"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[318],{64290:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var n=r(1413),a=r(74165),o=r(42982),i=r(15861),s=r(70885),c=r(72791),l=r(57689),d=r(89164),f=r(61889),u=r(94294),h=r(20890),x=r(45987),m=r(64554),p=r(13239),g=r(36314),v=r(80184),Z=["title","info","subtitle","progress","color","sx"];function b(e){var t=e.title,r=e.info,a=e.subtitle,o=e.progress,i=(e.color,e.sx),s=(0,x.Z)(e,Z),c=(0,v.jsx)(f.ZP,{item:!0,xs:12,md:4,sx:{bgcolor:"#03182f",borderRadius:{xs:"45px 45px 0 0",md:"45px 0 0 45px"},p:5},children:(0,v.jsxs)(m.Z,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(p.Z,{variant:"determinate",value:o,size:200,thickness:5,sx:{width:"100%",height:"100%",borderRadius:"80%",position:"relative",color:"#8cacff",zIndex:2}}),(0,v.jsx)(p.Z,{variant:"determinate",value:100,size:200,thickness:5,sx:{color:"rgba(255, 255, 255, 0.1)",borderRadius:"50%",position:"absolute",zIndex:1}}),(0,v.jsxs)(h.Z,{variant:"h4",sx:{fontSize:24,fontFamily:"Archivo, 'sans-serif'",fontWeight:"700",color:"#8CACFF",position:"absolute",zIndex:3},children:[o,"%",(0,v.jsx)(h.Z,{variant:"body2",sx:{fontSize:13,fontFamily:"Poppins",fontWeight:"300",color:"white",textAlign:"center"},children:"WQI"})]})]})}),l=(0,v.jsx)(f.ZP,{item:!0,xs:12,md:8,sx:{bgcolor:"#001227",borderRadius:{xs:"0 0 45px 45px",md:"0 45px 45px 0"},p:5,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:(0,v.jsx)(m.Z,{sx:{maxWidth:"400px",width:"100%"},children:(0,v.jsxs)(g.Z,{spacing:2,children:[(0,v.jsx)(h.Z,{variant:"h4",sx:{fontSize:15,fontFamily:"Archivo, 'sans-serif'",fontWeight:"600",color:"#1a56bb",textTransform:"uppercase",backgroundColor:"#051e68",width:"100%",height:"2.5rem",display:"flex",borderRadius:"2rem",textAlign:"center",alignItems:"center",justifyContent:"center",marginTop:"2rem"},children:t}),(0,v.jsx)(h.Z,{variant:"h4",sx:{fontSize:55,fontFamily:"Poppins",fontWeight:"700",color:"#8CACFF",textTransform:"uppercase",marginTop:"1rem"},children:r}),(0,v.jsx)(h.Z,{variant:"body2",sx:{fontSize:13,fontFamily:"Archivo, 'sans-serif'",fontWeight:"300",color:"white"},children:a})]})})});return(0,v.jsxs)(f.ZP,(0,n.Z)((0,n.Z)({container:!0,spacing:0,sx:(0,n.Z)({backgroundColor:"transparent",boxShadow:"none"},i)},s),{},{children:[c,l]}))}var y=r(57621),j=["parameterValue","parameterName","parameterScript","unit","sx"];function k(e){var t=e.parameterValue,r=e.parameterName,a=e.parameterScript,o=e.unit,i=e.sx,s=(0,x.Z)(e,j);return(0,v.jsx)(y.Z,(0,n.Z)((0,n.Z)({spacing:3,sx:(0,n.Z)({px:4,py:4,borderRadius:12},i)},s),{},{children:(0,v.jsxs)(g.Z,{direction:"column",alignItems:"center",children:[(0,v.jsx)(h.Z,{variant:"h5",sx:{color:"#8cacff",fontSize:30,fontFamily:"'Raleway', sans-serif",fontWeight:"600"},children:r}),(0,v.jsx)(h.Z,{variant:"h6",sx:{fontSize:13,fontFamily:"Archivo, 'sans-serif'",fontWeight:"500",color:"#1a56bb",textTransform:"uppercase",backgroundColor:"#051e68",width:"14rem",height:"1.7rem",display:"flex",borderRadius:"2rem",textAlign:"center",alignItems:"center",justifyContent:"center"},children:a}),(0,v.jsxs)(h.Z,{variant:"h2",sx:{color:"#8cacff",fontFamily:"Poppins",fontWeight:"500",textTransform:"uppercase"},children:[t,(0,v.jsx)("span",{style:{fontSize:30,marginLeft:"0.2em"},children:o})]})]})}))}var w=r(40248),S=r(96849);function P(){var e=(0,l.TH)().state,t=e.title,r=e.stationName,x=(0,S.E)().user,m=(0,l.UO)().stationId;console.log("Params:",m);var p=(0,c.useState)({title:t||"Default Title",info:"",subtitle:"",progress:0}),g=(0,s.Z)(p,2),Z=g[0],y=g[1],j=(0,c.useState)(r),P=(0,s.Z)(j,2),F=P[0],C=(P[1],(0,c.useState)(x.username)),W=(0,s.Z)(C,2),R=W[0],z=(W[1],(0,c.useState)([])),A=(0,s.Z)(z,2),D=A[0],I=A[1],M=(0,c.useState)([]),T=(0,s.Z)(M,2),N=T[0],E=T[1];(0,c.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i,c,l,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([fetch("/api/realm/activityLogs/".concat(m)),fetch("/api/realm/stationLogs/".concat(m))]);case 3:if(t=e.sent,r=(0,s.Z)(t,2),n=r[0],i=r[1],n.ok&&i.ok){e.next=9;break}throw new Error("Failed to fetch logs");case 9:return e.next=11,n.json();case 11:return c=e.sent,e.next=14,i.json();case 14:l=e.sent,(d=[].concat((0,o.Z)(c.logs),(0,o.Z)(l.logs))).sort((function(e,t){return new Date(t.dateAdded)-new Date(e.dateAdded)})),E(d),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error fetching logs:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();e()}),[m]),(0,c.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,o,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/realm/calculateWQI");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch station data");case 6:return e.next=8,t.json();case 8:(r=e.sent)[m]?(o=Object.values(r[m]).pop(),i=(o.wqi-r[m][Object.keys(r[m])[0]].wqi)/r[m][Object.keys(r[m])[0]].wqi*100,s=i>0?"increased":"decreased",y((0,n.Z)((0,n.Z)({},Z),{},{info:o.status,subtitle:" ".concat(m," is interpreted as ").concat(o.status," with a WQI result ").concat(o.wqi.toFixed(2)," ").concat(s," by ").concat(Math.abs(i).toFixed(2),"% since ").concat(new Date(o.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),progress:parseFloat(o.wqi.toFixed(2))}))):console.error("Station data not found"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching station data:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[m]),(0,c.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/realm/latestStationReadings/".concat(encodeURIComponent(F)));case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,console.log("Fetched data:",r),200===t.status?I(r):console.error("Failed to fetch parameter data:",r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error during parameter data fetch:",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[F]);var L=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,F&&R){e.next=4;break}return console.error("Please select Station Name and Tester Name"),e.abrupt("return");case 4:return e.next=6,fetch("/api/realm/startMonitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stationName:F,tester:R})});case 6:return t=e.sent,e.next=9,t.json();case 9:r=e.sent,console.log(r.message),201===t.status&&r.userId,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error during initialization:",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/realm/deleteUserData",{method:"DELETE"});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,console.log(r.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error:",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(d.Z,{maxWidth:"lg",children:(0,v.jsxs)(f.ZP,{container:!0,spacing:5,mt:2,children:[(0,v.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,v.jsx)(b,{title:Z.info,info:Z.title,subtitle:Z.subtitle,progress:Z.progress})}),(0,v.jsxs)(f.ZP,{item:!0,container:!0,xs:12,sm:12,md:12,justifyContent:"flex-start",alignItems:"center",ml:1,children:[(0,v.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:6,mb:3,children:(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{style:{color:"white",fontFamily:"'Arimo', sans-serif",fontWeight:500,fontSize:20,textTransform:"uppercase",marginLeft:2},children:"Monitored"}),(0,v.jsx)("span",{style:{color:"#8cacff",fontFamily:"'Arimo', sans-serif",fontWeight:500,fontSize:20,textTransform:"uppercase",marginLeft:4},children:"Physicochemical Parameters"})]})}),(0,v.jsxs)(f.ZP,{item:!0,xs:12,sm:12,md:6,container:!0,justifyContent:"flex-end",children:[(0,v.jsx)(u.Z,{variant:"contained",onClick:L,sx:{borderRadius:5,padding:"1ch",backgroundColor:"#8cacff",marginRight:1,fontFamily:"Poppins",color:"#001227"},children:"Start Monitoring"}),(0,v.jsx)(u.Z,{variant:"contained",onClick:O,sx:{borderRadius:5,backgroundColor:"#8cacff",fontFamily:"Poppins",color:"#001227"},children:"Terminate"})]})]}),D&&Object.keys(D).length>0?Object.entries(D).map((function(e){var t=(0,s.Z)(e,2),r=t[0],n=t[1];return(0,v.jsx)(f.ZP,{item:!0,xs:12,sm:4,md:4,children:(0,v.jsx)(k,{sx:{backgroundColor:"#001227"},parameterName:n.paramName,parameterScript:n.parameterScript,parameterValue:n.paramValue,unit:n.unit})},r)})):(0,v.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,mt:5,height:150,children:(0,v.jsx)(h.Z,{variant:"h6",color:"textSecondary",align:"center",sx:{fontFamily:"Poppins",fontWeight:"200",color:"#8cacff",opacity:"75%"},children:"No parameter data available"})}),(0,v.jsxs)(f.ZP,{item:!0,xs:12,sm:12,md:12,mt:4,style:{display:"flex",flexDirection:"column"},children:[(0,v.jsx)("span",{style:{color:"white",fontFamily:"'Arimo', sans-serif",fontWeight:500,fontSize:25,textTransform:"uppercase",marginLeft:8},children:"Latest Station Activity"}),(0,v.jsx)("span",{style:{color:"#8CACFF",fontFamily:"Poppins",fontWeight:300,fontSize:13,marginLeft:8},children:"Review the recent station activities that have taken place"})]}),(0,v.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,v.jsx)(w.Z,{sx:{backgroundColor:"#0d2135",boxShadow:"none",margin:0,padding:0},list:N.map((function(e){return{id:e._id,tester:e.tester,dateAdded:e.dateAdded,status:e.status}}))})})]})})}function F(){return(0,v.jsx)("div",{children:(0,v.jsx)(P,{})})}},40248:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(1413),a=r(45987),o=(r(72791),r(57621)),i=r(35527),s=r(79836),c=r(56890),l=r(35855),d=r(53994),f=r(53382),u=r(15522),h=r(80184),x=["title","subheader","list","sx"];function m(e){e.title,e.subheader;var t=e.list,r=e.sx,m=(0,a.Z)(e,x);return(0,h.jsx)(o.Z,(0,n.Z)((0,n.Z)({spacing:3,sx:(0,n.Z)({px:4,py:4,overflowX:"auto"},r)},m),{},{children:(0,h.jsx)(i.Z,{sx:{borderRadius:"15px",overflow:"hidden",backgroundColor:"transparent",boxShadow:"none"},children:(0,h.jsxs)(s.Z,{children:[(0,h.jsx)(c.Z,{style:{backgroundColor:"#001227",color:"white",fontWeight:600},children:(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(d.Z,{align:"center",sx:{color:"#8cacff",fontWeight:600,fontFamily:"Poppins",borderBottom:"none"},children:"Tester"}),(0,h.jsx)(d.Z,{align:"center",sx:{color:"#8cacff",fontWeight:600,fontFamily:"Poppins",borderBottom:"none"},children:"Date"}),(0,h.jsx)(d.Z,{align:"center",sx:{color:"#8cacff",fontWeight:600,fontFamily:"Poppins",borderBottom:"none"},children:"Status"})]})}),(0,h.jsx)(f.Z,{children:t.map((function(e,t){return(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(d.Z,{align:"center",sx:{borderBottom:"1px solid #03324e",color:"#8cacff",fontFamily:"Poppins",fontWeight:"700"},children:e.tester}),(0,h.jsx)(d.Z,{align:"center",sx:{borderBottom:"1px solid #03324e",color:"#8cacff",fontFamily:"Poppins"},children:(0,u.zM)(e.dateAdded)}),(0,h.jsx)(d.Z,{align:"center",sx:{borderBottom:"1px solid #03324e",color:"#8cacff",fontFamily:"Poppins"},children:(0,h.jsx)("span",{style:{backgroundColor:p(e.status),color:g(e.status),padding:"0.5rem",fontWeight:"700",borderRadius:"3rem",fontFamily:"Poppins"},children:e.status})})]},e.id||t)}))})]})})}))}function p(e){switch(e){case"Added":return"#74a7f7";case"Monitored":return"#ffff80";case"Recently Monitored":return"#a1e6a6";default:return"transparent"}}function g(e){switch(e){case"Added":return"#093887";case"Monitored":return"#616106";case"Recently Monitored":return"#043608";default:return"black"}}},13239:function(e,t,r){r.d(t,{Z:function(){return A}});var n=r(30168),a=r(63366),o=r(87462),i=r(72791),s=r(63733),c=r(94419),l=r(52554),d=r(14036),f=r(31402),u=r(66934),h=r(75878),x=r(21217);function m(e){return(0,x.Z)("MuiCircularProgress",e)}(0,h.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var p,g,v,Z,b,y,j,k,w=r(80184),S=["className","color","disableShrink","size","style","thickness","value","variant"],P=44,F=(0,l.F4)(b||(b=p||(p=(0,n.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),C=(0,l.F4)(y||(y=g||(g=(0,n.Z)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),W=(0,u.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],t["color".concat((0,d.Z)(r.color))]]}})((function(e){var t=e.ownerState,r=e.theme;return(0,o.Z)({display:"inline-block"},"determinate"===t.variant&&{transition:r.transitions.create("transform")},"inherit"!==t.color&&{color:(r.vars||r).palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&(0,l.iv)(j||(j=v||(v=(0,n.Z)(["\n      animation: "," 1.4s linear infinite;\n    "]))),F)})),R=(0,u.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),z=(0,u.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var r=e.ownerState;return[t.circle,t["circle".concat((0,d.Z)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,r=e.theme;return(0,o.Z)({stroke:"currentColor"},"determinate"===t.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&(0,l.iv)(k||(k=Z||(Z=(0,n.Z)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),C)})),A=i.forwardRef((function(e,t){var r=(0,f.Z)({props:e,name:"MuiCircularProgress"}),n=r.className,i=r.color,l=void 0===i?"primary":i,u=r.disableShrink,h=void 0!==u&&u,x=r.size,p=void 0===x?40:x,g=r.style,v=r.thickness,Z=void 0===v?3.6:v,b=r.value,y=void 0===b?0:b,j=r.variant,k=void 0===j?"indeterminate":j,F=(0,a.Z)(r,S),C=(0,o.Z)({},r,{color:l,disableShrink:h,size:p,thickness:Z,value:y,variant:k}),A=function(e){var t=e.classes,r=e.variant,n=e.color,a=e.disableShrink,o={root:["root",r,"color".concat((0,d.Z)(n))],svg:["svg"],circle:["circle","circle".concat((0,d.Z)(r)),a&&"circleDisableShrink"]};return(0,c.Z)(o,m,t)}(C),D={},I={},M={};if("determinate"===k){var T=2*Math.PI*((P-Z)/2);D.strokeDasharray=T.toFixed(3),M["aria-valuenow"]=Math.round(y),D.strokeDashoffset="".concat(((100-y)/100*T).toFixed(3),"px"),I.transform="rotate(-90deg)"}return(0,w.jsx)(W,(0,o.Z)({className:(0,s.Z)(A.root,n),style:(0,o.Z)({width:p,height:p},I,g),ownerState:C,ref:t,role:"progressbar"},M,F,{children:(0,w.jsx)(R,{className:A.svg,ownerState:C,viewBox:"".concat(22," ").concat(22," ").concat(P," ").concat(P),children:(0,w.jsx)(z,{className:A.circle,style:D,ownerState:C,cx:P,cy:P,r:(P-Z)/2,fill:"none",strokeWidth:Z})})}))}))}}]);
//# sourceMappingURL=318.7c52ead3.chunk.js.map