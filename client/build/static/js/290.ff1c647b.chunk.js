"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[290],{64290:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(1413),i=n(74165),a=n(42982),o=n(15861),s=n(70885),c=n(72791),l=n(57689),d=n(89164),f=n(61889),p=n(94294),h=n(20890),u=n(45987),x=n(64554),m=n(13239),g=n(5289),v=n(39157),Z=(n(99689),n(80184)),j=["title","info","subtitle","progress","color","sx"];function y(e){var t,n=e.title,i=e.info,a=e.subtitle,o=e.progress,l=(e.color,e.sx),d=(0,u.Z)(e,j),p=(0,c.useState)(!1),y=(0,s.Z)(p,2),F=y[0],b=y[1],w=(t=o)>=0&&t<=25?"#A1E6A6":t>25&&t<=50?"#FFFF80":t>50&&t<=75?"#EEFF51":t>75&&t<=100?"#F5B748":t>100&&t<=150?"#FF6551":"#8CACFF",k=(0,Z.jsx)(f.ZP,{item:!0,xs:12,md:4,sx:(0,r.Z)({bgcolor:"#03182f",borderRadius:{xs:"45px 45px 0 0",md:"45px 0 0 45px"},p:5},l),children:(0,Z.jsxs)(x.Z,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:function(){b(!0)},children:[(0,Z.jsx)(m.Z,{variant:"determinate",value:o,size:200,thickness:5,sx:{width:"100%",height:"100%",borderRadius:"80%",position:"relative",color:w,zIndex:2}}),(0,Z.jsx)(m.Z,{variant:"determinate",value:100,size:200,thickness:5,sx:{color:"rgba(255, 255, 255, 0.1)",borderRadius:"50%",position:"absolute",zIndex:1}}),(0,Z.jsxs)(h.Z,{variant:"h4",sx:{fontSize:24,fontFamily:"Archivo, 'sans-serif'",fontWeight:"700",color:w,position:"absolute",zIndex:3},children:[o,"%",(0,Z.jsx)(h.Z,{variant:"body2",sx:{fontSize:13,fontFamily:"Poppins",fontWeight:"300",color:"white",textAlign:"center"},children:"WQI"})]})]})}),P=(0,Z.jsx)(f.ZP,{item:!0,xs:12,md:8,sx:(0,r.Z)({bgcolor:"#001227",borderRadius:{xs:"0 0 45px 45px",md:"0 45px 45px 0"},p:5,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},l),children:(0,Z.jsxs)(x.Z,{sx:{maxWidth:"400px",width:"100%"},children:[(0,Z.jsx)(h.Z,{variant:"h4",sx:{fontSize:15,fontFamily:"Archivo, 'sans-serif'",fontWeight:"600",color:w,textTransform:"uppercase",backgroundColor:"#03182f",width:"100%",height:"2.5rem",display:"flex",borderRadius:"2rem",textAlign:"center",alignItems:"center",justifyContent:"center",marginTop:"2rem"},children:n}),(0,Z.jsx)(h.Z,{variant:"h4",sx:{fontSize:55,fontFamily:"Poppins",fontWeight:"700",color:w,textTransform:"uppercase",marginTop:"1rem"},children:i}),(0,Z.jsx)(h.Z,{variant:"body2",sx:{fontSize:13,fontFamily:"Archivo, 'sans-serif'",fontWeight:"300",color:"white"},children:a})]})});return(0,Z.jsxs)(f.ZP,(0,r.Z)((0,r.Z)({container:!0,spacing:0,sx:(0,r.Z)({backgroundColor:"transparent",boxShadow:"none"},l)},d),{},{children:[k,P,(0,Z.jsx)(g.Z,{open:F,onClose:function(){b(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"transparent",boxShadow:"none",borderRadius:"1rem",color:"white",padding:"2rem"}},children:(0,Z.jsx)(v.Z,{sx:{backgroundColor:"#0d2135",borderRadius:"1rem",color:"white",padding:"2rem"},children:(0,Z.jsxs)("div",{className:"Qi-container",children:[(0,Z.jsx)(h.Z,{variant:"h4",sx:{fontFamily:"Poppins",fontWeight:"700",textAlign:"center",color:"#8CACFF"},children:"Classification of Water Quality Index:"}),(0,Z.jsxs)("div",{className:"class-holder",children:[(0,Z.jsxs)("div",{className:"interpretation-holder",children:[(0,Z.jsx)("div",{className:"point-holder",children:(0,Z.jsx)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#A1E6A6"},children:"0-25"})}),(0,Z.jsx)("div",{className:"interpretation",children:(0,Z.jsxs)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#A1E6A6"},children:["Excellent",(0,Z.jsx)(h.Z,{variant:"body1",sx:{fontFamily:"Poppins",fontWeight:"400"},children:"Clean water, excellently suitable for drinking"})]})})]}),(0,Z.jsxs)("div",{className:"interpretation-holder",children:[(0,Z.jsx)("div",{className:"point-holder",children:(0,Z.jsx)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#FFFF80"},children:"26-50"})}),(0,Z.jsx)("div",{className:"interpretation",children:(0,Z.jsxs)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#FFFF80"},children:["Good",(0,Z.jsx)(h.Z,{variant:"body1",sx:{fontFamily:"Poppins",fontWeight:"400"},children:"Suitable for drinking"})]})})]}),(0,Z.jsxs)("div",{className:"interpretation-holder",children:[(0,Z.jsx)("div",{className:"point-holder",children:(0,Z.jsx)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#EEFF51"},children:"51-75"})}),(0,Z.jsx)("div",{className:"interpretation",children:(0,Z.jsxs)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#EEFF51"},children:["Fair",(0,Z.jsx)(h.Z,{variant:"body1",sx:{fontFamily:"Poppins",fontWeight:"400"},children:"Modestly suitable for drinking"})]})})]}),(0,Z.jsxs)("div",{className:"interpretation-holder",children:[(0,Z.jsx)("div",{className:"point-holder",children:(0,Z.jsx)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#F5B748"},children:"76-100"})}),(0,Z.jsx)("div",{className:"interpretation",children:(0,Z.jsxs)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#F5B748"},children:["Poor",(0,Z.jsx)(h.Z,{variant:"body1",sx:{fontFamily:"Poppins",fontWeight:"400"},children:"Unsuitable for drinking, minor treatment (purification) required before usage"})]})})]}),(0,Z.jsxs)("div",{className:"interpretation-holder",children:[(0,Z.jsx)("div",{className:"point-holder",children:(0,Z.jsx)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#FF6551"},children:"> 100"})}),(0,Z.jsx)("div",{className:"interpretation",children:(0,Z.jsxs)(h.Z,{variant:"h6",sx:{fontFamily:"Poppins",fontWeight:"700",color:"#FF6551"},children:["Very Poor",(0,Z.jsx)(h.Z,{variant:"body1",sx:{fontFamily:"Poppins",fontWeight:"400"},children:"Unsuitable for drinking, Appropriate treatment required before usage or seek alternative sources of supply"})]})})]})]})]})})})]}))}var F=n(57621),b=n(36314),w=["parameterValue","parameterName","parameterScript","unit","sx"];function k(e){var t=e.parameterValue,n=e.parameterName,i=e.parameterScript,a=e.unit,o=e.sx,s=(0,u.Z)(e,w);return(0,Z.jsx)(F.Z,(0,r.Z)((0,r.Z)({spacing:3,sx:(0,r.Z)({px:4,py:4,borderRadius:12},o)},s),{},{children:(0,Z.jsxs)(b.Z,{direction:"column",alignItems:"center",children:[(0,Z.jsx)(h.Z,{variant:"h5",sx:{color:"#8cacff",fontSize:30,fontFamily:"'Raleway', sans-serif",fontWeight:"600"},children:n}),(0,Z.jsx)(h.Z,{variant:"h6",sx:{fontSize:13,fontFamily:"Archivo, 'sans-serif'",fontWeight:"500",textTransform:"uppercase",backgroundColor:"#03182f",width:"14rem",height:"1.7rem",display:"flex",borderRadius:"2rem",textAlign:"center",alignItems:"center",justifyContent:"center",color:"Optimal temperature"===i||"Water is Clean"===i||"Neutral"===i?"#A1E6A6":"Suboptimal temperature"===i||"Water is Turbid(Dirty)"===i||"pH level is Acidic"===i?"#F5B748":"pH level is Alkaline"===i?"#FFFF80":"#FFFFFF"},children:i}),(0,Z.jsxs)(h.Z,{variant:"h2",sx:{color:"#8cacff",fontFamily:"Poppins",fontWeight:"500",textTransform:"uppercase"},children:[t,(0,Z.jsx)("span",{style:{fontSize:30,marginLeft:"0.2em"},children:a})]})]})}))}var P=n(40248),W=n(96849);function S(){var e=(0,l.TH)().state,t=e.title,n=e.stationName,u=(0,W.E)().user,x=(0,l.UO)().stationId;console.log("Params:",x);var m=(0,c.useState)({title:t||"Default Title",info:"",subtitle:"",progress:0}),g=(0,s.Z)(m,2),v=g[0],j=g[1],F=(0,c.useState)(n),b=(0,s.Z)(F,2),w=b[0],S=(b[1],(0,c.useState)(u.username)),C=(0,s.Z)(S,2),A=C[0],E=(C[1],(0,c.useState)([])),N=(0,s.Z)(E,2),z=N[0],R=N[1],I=(0,c.useState)([]),T=(0,s.Z)(I,2),D=T[0],L=T[1],B=(0,c.useState)(!1),M=(0,s.Z)(B,2),q=M[0],O=M[1];(0,c.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,o,c,l,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([fetch("/api/realm/activityLogs/".concat(x)),fetch("/api/realm/stationLogs/".concat(x))]);case 3:if(t=e.sent,n=(0,s.Z)(t,2),r=n[0],o=n[1],r.ok&&o.ok){e.next=9;break}throw new Error("Failed to fetch logs");case 9:return e.next=11,r.json();case 11:return c=e.sent,e.next=14,o.json();case 14:l=e.sent,(d=[].concat((0,a.Z)(c.logs),(0,a.Z)(l.logs))).sort((function(e,t){return new Date(t.dateAdded)-new Date(e.dateAdded)})),L(d),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error fetching logs:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();e()}),[x]),(0,c.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,a,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/realm/calculateWQI");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch station data");case 6:return e.next=8,t.json();case 8:(n=e.sent)[x]?(a=Object.values(n[x]).pop(),o=(a.wqi-n[x][Object.keys(n[x])[0]].wqi)/n[x][Object.keys(n[x])[0]].wqi*100,s=o>0?"increased":"decreased",j((0,r.Z)((0,r.Z)({},v),{},{info:a.status,subtitle:" ".concat(x," is interpreted as ").concat(a.status," with a WQI result ").concat(a.wqi.toFixed(2)," ").concat(s," by ").concat(Math.abs(o).toFixed(2),"% since ").concat(new Date(a.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),progress:parseFloat(a.wqi.toFixed(2))}))):O(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching station data:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[x]),(0,c.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,a,o,s,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=16;break}return e.prev=1,e.next=4,fetch("/api/realm/wqiResult");case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Failed to fetch station data");case 7:return e.next=9,t.json();case 9:(n=e.sent)[x]?(a=n[x],o=a.wqi,s=a.status,c=a.createdAt,j((0,r.Z)((0,r.Z)({},v),{},{info:s,subtitle:"".concat(x," is interpreted as ").concat(s," with a WQI result ").concat(o.toFixed(2)," since ").concat(new Date(c).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),progress:parseFloat(o.toFixed(2))}))):console.error("Station data not found"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error fetching station data:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[q,x]),(0,c.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/realm/latestStationReadings/".concat(encodeURIComponent(w)));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log("Fetched data:",n),200===t.status?R(n):console.error("Failed to fetch parameter data:",n.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error during parameter data fetch:",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(e,5e3);return function(){return clearInterval(t)}}),[w]);var U=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w&&A){e.next=4;break}return console.error("Please select Station Name and Tester Name"),e.abrupt("return");case 4:return e.next=6,fetch("/api/realm/startMonitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stationName:w,tester:A})});case 6:return t=e.sent,e.next=9,t.json();case 9:n=e.sent,console.log(n.message),201===t.status&&(n.userId,O(!0)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error during initialization:",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/realm/deleteUserData",{method:"DELETE"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log(n.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error:",e.t0.message);case 13:O(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsx)(d.Z,{maxWidth:"lg",children:(0,Z.jsxs)(f.ZP,{container:!0,spacing:5,mt:2,children:[(0,Z.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,Z.jsx)(y,{title:v.info,info:v.title,subtitle:v.subtitle,progress:v.progress})}),(0,Z.jsxs)(f.ZP,{item:!0,container:!0,xs:12,sm:12,md:12,justifyContent:"flex-start",alignItems:"center",ml:1,children:[(0,Z.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:6,mb:3,children:(0,Z.jsxs)("div",{children:[(0,Z.jsx)("span",{style:{color:"white",fontFamily:"'Arimo', sans-serif",fontWeight:500,fontSize:20,textTransform:"uppercase",marginLeft:2},children:"Monitored"}),(0,Z.jsx)("span",{style:{color:"#8cacff",fontFamily:"'Arimo', sans-serif",fontWeight:500,fontSize:20,textTransform:"uppercase",marginLeft:4},children:"Physicochemical Parameters"})]})}),(0,Z.jsxs)(f.ZP,{item:!0,xs:12,sm:12,md:6,container:!0,justifyContent:"flex-end",children:[(0,Z.jsx)(p.Z,{variant:"contained",onClick:U,sx:{borderRadius:5,padding:"1ch",backgroundColor:"#8cacff",marginRight:1,fontFamily:"Poppins",color:"#001227",fontsize:"0.9rem"},children:"Start Monitoring"}),(0,Z.jsx)(p.Z,{variant:"contained",onClick:Q,sx:{borderRadius:5,backgroundColor:"#8cacff",fontFamily:"Poppins",color:"#001227",fontsize:"0.9rem"},children:"Terminate"})]})]}),z&&Object.keys(z).length>0?Object.entries(z).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,Z.jsx)(f.ZP,{item:!0,xs:12,sm:4,md:4,children:(0,Z.jsx)(k,{sx:{backgroundColor:"#001227"},parameterName:r.paramName,parameterScript:r.parameterScript,parameterValue:r.paramValue,unit:r.unit})},n)})):(0,Z.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,mt:5,height:150,children:(0,Z.jsx)(h.Z,{variant:"h6",color:"textSecondary",align:"center",sx:{fontFamily:"Poppins",fontWeight:"200",color:"#8cacff",opacity:"75%"},children:"No parameter data available"})}),(0,Z.jsxs)(f.ZP,{item:!0,xs:12,sm:12,md:12,mt:4,style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("span",{style:{color:"white",fontFamily:"'Arimo', sans-serif",fontWeight:500,fontSize:25,textTransform:"uppercase",marginLeft:8},children:"Latest Station Activity"}),(0,Z.jsx)("span",{style:{color:"#8CACFF",fontFamily:"Poppins",fontWeight:300,fontSize:13,marginLeft:8},children:"Review the recent station activities that have taken place"})]}),(0,Z.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,Z.jsx)(P.Z,{sx:{backgroundColor:"#0d2135",boxShadow:"none",margin:0,padding:0},list:D.map((function(e){return{id:e._id,tester:e.tester,dateAdded:e.dateAdded,status:e.status}}))})})]})})}function C(){return(0,Z.jsx)("div",{children:(0,Z.jsx)(S,{})})}},40248:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(1413),i=n(45987),a=(n(72791),n(57621)),o=n(35527),s=n(79836),c=n(56890),l=n(35855),d=n(53994),f=n(53382),p=n(15522),h=n(80184),u=["title","subheader","list","sx"];function x(e){e.title,e.subheader;var t=e.list,n=e.sx,x=(0,i.Z)(e,u);return(0,h.jsx)(a.Z,(0,r.Z)((0,r.Z)({spacing:3,sx:(0,r.Z)({px:4,py:4,overflowX:"auto"},n)},x),{},{children:(0,h.jsx)(o.Z,{sx:{borderRadius:"15px",overflow:"hidden",backgroundColor:"transparent",boxShadow:"none"},children:(0,h.jsxs)(s.Z,{children:[(0,h.jsx)(c.Z,{style:{backgroundColor:"#001227",color:"white",fontWeight:600},children:(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(d.Z,{align:"center",sx:{color:"#8cacff",fontWeight:600,fontFamily:"Poppins",borderBottom:"none"},children:"Tester"}),(0,h.jsx)(d.Z,{align:"center",sx:{color:"#8cacff",fontWeight:600,fontFamily:"Poppins",borderBottom:"none"},children:"Date"}),(0,h.jsx)(d.Z,{align:"center",sx:{color:"#8cacff",fontWeight:600,fontFamily:"Poppins",borderBottom:"none"},children:"Status"})]})}),(0,h.jsx)(f.Z,{children:t.map((function(e,t){return(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(d.Z,{align:"center",sx:{borderBottom:"1px solid #03324e",color:"#8cacff",fontFamily:"Poppins",fontWeight:"700"},children:e.tester}),(0,h.jsx)(d.Z,{align:"center",sx:{borderBottom:"1px solid #03324e",color:"#8cacff",fontFamily:"Poppins"},children:(0,p.zM)(e.dateAdded)}),(0,h.jsx)(d.Z,{align:"center",sx:{borderBottom:"1px solid #03324e",color:"#8cacff",fontFamily:"Poppins"},children:(0,h.jsx)("span",{style:{backgroundColor:m(e.status),color:g(e.status),padding:"0.5rem",fontWeight:"700",borderRadius:"3rem",fontFamily:"Poppins"},children:e.status})})]},e.id||t)}))})]})})}))}function m(e){switch(e){case"Added":return"#74a7f7";case"Monitored":return"#ffff80";case"Recently Monitored":return"#a1e6a6";default:return"transparent"}}function g(e){switch(e){case"Added":return"#093887";case"Monitored":return"#616106";case"Recently Monitored":return"#043608";default:return"black"}}},99689:function(){}}]);
//# sourceMappingURL=290.ff1c647b.chunk.js.map