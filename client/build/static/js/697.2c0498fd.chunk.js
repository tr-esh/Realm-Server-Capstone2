"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[697],{83697:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var r=n(72791),o=n(74165),i=n(15861),a=n(70885),s=n(89164),l=n(61889),c=n(36314),u=n(1413),d=n(45987),p=n(57621),h=n(64554),x=n(13400),m=n(20890),f=n(6815),g=n(11087),b=n(80184),Z=["title","subtitle","icon","color","sx"];function j(e){var t=e.title,n=e.subtitle,r=(e.icon,e.color,e.sx),o=(0,d.Z)(e,Z);return(0,b.jsxs)(p.Z,(0,u.Z)((0,u.Z)({component:l.ZP,container:!0,spacing:3,alignItems:"center",sx:(0,u.Z)({px:2,py:4,borderRadius:10},r)},o),{},{children:[(0,b.jsx)(l.ZP,{item:!0,xs:2,sm:1,mt:-2,children:(0,b.jsx)(h.Z,{children:(0,b.jsx)(x.Z,{component:g.rU,to:"/logentries",sx:{padding:"8px",border:"1px solid #8CACFF",borderRadius:3,display:"flex",alignItems:"center"},children:(0,b.jsx)(f.Z,{sx:{fontSize:30,color:"#6990f5"}})})})}),(0,b.jsx)(l.ZP,{item:!0,xs:10,sm:11,children:(0,b.jsxs)(h.Z,{children:[(0,b.jsx)(m.Z,{variant:"h4",sx:{fontSize:50,fontFamily:"'Arimo', sans-serif",fontWeight:"700",color:"white",textTransform:"uppercase",mt:-4},children:t}),(0,b.jsx)(m.Z,{variant:"subtitle1",sx:{color:"#8CACFF",fontSize:15,fontFamily:"Poppins",fontWeight:"300",lineHeight:"0.2"},children:n})]})})]}))}var v=n(57689),y=n(35855),C=n(53994),A=n(39281),P=n(79836),k=n(56890),w=n(53382),F=n(26812),S=n(15522),_=["title","subheader","list","sx"];function z(e){var t=e.tester,n=e.paramName,r=e.paramValue,o=e.createdAt;return(0,b.jsxs)(y.Z,{children:[(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none",color:"white",fontFamily:"Poppins",fontSize:13,fontWeight:300},children:t}),(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none",color:"white",fontFamily:"Poppins",fontSize:13,fontWeight:300},children:n}),(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none",color:"white",fontFamily:"Poppins",fontSize:13,fontWeight:300},children:r}),(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none",color:"white",fontFamily:"Poppins",fontSize:13,fontWeight:300},children:(0,S.zM)(o)})]})}function B(e){e.title,e.subheader;var t=e.list,n=e.sx,o=(0,d.Z)(e,_),i=(0,r.useState)(0),s=(0,a.Z)(i,2),l=s[0],c=s[1],h=(0,r.useState)(10),x=(0,a.Z)(h,2),m=x[0],f=x[1];return(0,b.jsx)(p.Z,(0,u.Z)((0,u.Z)({spacing:3,sx:(0,u.Z)({px:4,py:4,overflowX:"hidden"},n)},o),{},{children:(0,b.jsx)("div",{className:"custom-table",children:(0,b.jsxs)(A.Z,{sx:{"& th":{color:"#0A1929",fontFamily:"Archivo, 'sans-serif'",fontSize:15,fontWeight:"600",backgroundColor:"#8CACFF",position:"sticky",top:0},"&::-webkit-scrollbar":{display:"none"}},style:{overflowY:"auto"},children:[(0,b.jsxs)(P.Z,{style:{width:"100%",borderSpacing:"0 15px",textAlign:"center"},children:[(0,b.jsx)(k.Z,{children:(0,b.jsxs)(y.Z,{children:[(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none"},children:"Tester"}),(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none"},children:"Parameter Name"}),(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none"},children:"Value"}),(0,b.jsx)(C.Z,{sx:{textAlign:"center",borderBottom:"none"},children:"Date"})]})}),(0,b.jsx)(w.Z,{children:t&&t.slice(l*m,l*m+m).map((function(e){return(0,b.jsx)(z,(0,u.Z)({},e),e.id)}))})]}),(0,b.jsx)(F.Z,{style:{color:"white"},rowsPerPageOptions:[10,25,45,50],component:"div",rowsPerPage:m,page:l,count:t?t.length:0,onPageChange:function(e,t){c(t)},onRowsPerPageChange:function(e){f(parseInt(e.target.value,10)),c(0)}})]})})}))}var N=n(23356),T=n(94294),W=["onClick","sx"];function M(e){var t=e.onClick,n=(e.sx,(0,d.Z)(e,W),(0,r.useState)(null)),o=(0,a.Z)(n,2),i=(o[0],o[1]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(N.Z,{title:"Export station report in XLSX format",children:(0,b.jsx)(T.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){t&&t(),i(e.currentTarget)},sx:{backgroundColor:"transparent","&:hover":{backgroundColor:"#8CACFF",opacity:.8,color:"#0A1929"},borderRadius:5,color:"white",width:150,height:45,fontSize:"0.8rem",fontWeight:"500",fontFamily:"Poppins",border:"1px solid #8CACFF"},children:"Export Data"})})})}var I=n(71715),U=n(5022),D=n(26759),E=["options","onSort","sx"];function R(e){var t=e.options,n=e.onSort,o=(e.sx,(0,d.Z)(e,E),(0,r.useState)("Temperature")),i=(0,a.Z)(o,2),s=i[0],l=i[1],c=(0,r.useState)(null),u=(0,a.Z)(c,2),p=u[0],h=u[1],x=function(e){h(null),e&&(l(e.label),n&&n(e.value))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(T.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){h(e.currentTarget)},endIcon:(0,b.jsx)(D.Z,{}),sx:{backgroundColor:"transparent","&:hover":{backgroundColor:"#8CACFF",opacity:.8,color:"#0A1929"},borderRadius:5,color:"white",width:150,height:45,fontSize:"0.8rem",fontWeight:"500",fontFamily:"Poppins",border:"1px solid #0A1929"},children:s}),(0,b.jsx)(I.Z,{id:"simple-menu",anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:function(){return x(null)},sx:{".MuiPaper-root":{backgroundColor:"rgba(13, 33, 53, 0.32)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",color:"white",fontSize:"0.5rem",fontFamily:"'Archivo', sans-serif"},".MuiMenuItem-root":{fontSize:"0.8rem",fontFamily:"'Archivo', sans-serif"}},children:t.map((function(e){return(0,b.jsx)(U.Z,{onClick:function(){return x(e)},children:e.label},e.value)}))})]})}var H=n(34045);function L(){var e=(0,v.UO)(),t=e.stationId,n=e.month,u=e.year;console.log("Params:",t,n,u);var d=(0,r.useState)(!1),p=(0,a.Z)(d,2),h=(p[0],p[1]),x=(0,r.useState)([]),m=(0,a.Z)(x,2),f=m[0],g=m[1],Z=(0,r.useState)("temperature"),y=(0,a.Z)(Z,2),C=y[0],A=y[1],P=(0,r.useState)([]),k=(0,a.Z)(P,2),w=k[0],F=k[1],S=(0,r.useState)(""),_=(0,a.Z)(S,2),z=(_[0],_[1]),N=["January","February","March","April","May","June","July","August","September","October","November","December"];(0,r.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var r,i,a,s,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,fetch("/api/realm/monthlyData/".concat(t));case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent,console.log("Fetched data:",i),a=0,-1!==(s=N.indexOf(n))?a=s+1:console.error("Invalid month parameter:",n),l=i.filter((function(e){var t=new Date(e.createdAt),n=t.getUTCMonth()+1,r=t.getUTCFullYear();return n===a&&r===parseInt(u)})),console.log("Filtered data:",l),g(i),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),z("Error fetching monthly data"),console.error("Error fetching monthly data:",e.t0);case 21:return e.prev=21,h(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,n,u]),(0,r.useEffect)((function(){if(f.length>0){var e=f.filter((function(e){return e.paramName===C}));F(e)}}),[f,C]);function T(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!==e.length;++r)n[r]=255&e.charCodeAt(r);return t}return(0,b.jsx)(s.Z,{maxWidth:"lg",children:(0,b.jsxs)(l.ZP,{container:!0,mt:5,children:[(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,ml:3,children:(0,b.jsx)(j,{sx:{backgroundColor:"#0A1929"},title:"".concat(n.charAt(0).toUpperCase()+n.slice(1)," Logs"),subtitle:"Never miss a beat with our log tracking solution."})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,mt:6,mb:2,ml:1,children:(0,b.jsx)(R,{options:[{value:"turbidity",label:"Turbidity"},{value:"temperature",label:"Temperature"},{value:"pH",label:"pH"}],onSort:function(e){A(e)}})}),(0,b.jsx)(l.ZP,{container:!0,spacing:4,mb:2,children:(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,b.jsx)(B,{sx:{backgroundColor:"#10273d",borderRadius:10},list:w})})}),(0,b.jsx)(l.ZP,{container:!0,mt:3,spacing:4,mb:2,children:(0,b.jsx)(l.ZP,{item:!0,xs:12,children:(0,b.jsx)(c.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:(0,b.jsx)(M,{onClick:function(){return function(e){console.log("Monthly Data:",f),console.log("Month Name:",e);var n=f.map((function(e){var n=e.tester,r=e.paramName,o=e.paramValue,i=e.createdAt;return{stationId:t,tester:n,paramName:r,paramValue:o,createdAt:new Date(i).toLocaleString("en-PH",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}}));console.log("Mapped Data:",n);var r=H.P6.book_new(),o=H.P6.json_to_sheet(n.filter((function(e){return"temperature"===e.paramName}))),i=H.P6.json_to_sheet(n.filter((function(e){return"turbidity"===e.paramName}))),a=H.P6.json_to_sheet(n.filter((function(e){return"pH"===e.paramName})));H.P6.book_append_sheet(r,o,"Temperature"),H.P6.book_append_sheet(r,i,"Turbidity"),H.P6.book_append_sheet(r,a,"pH");var s=H.cW(r,{type:"binary",bookType:"xlsx"}),l="".concat(e.toLowerCase(),"_logs.xlsx"),c=new Blob([T(s)],{type:"application/octet-stream"}),u=document.createElement("a");u.href=URL.createObjectURL(c),u.download=l,u.click()}(n.charAt(0).toUpperCase()+n.slice(1))}})})})})]})})}function O(){return(0,b.jsx)("div",{children:(0,b.jsx)(L,{})})}}}]);
//# sourceMappingURL=697.2c0498fd.chunk.js.map